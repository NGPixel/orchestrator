"use strict";jQuery(document).ready(function(a){return new Vue({el:"#page-rooms",data:{createModal:{state:!1,loading:!1,name:"",nameIsError:!1},assignModal:{state:!1,loading:!1,loadingMsg:"fetching",device:"",devices:[],roomId:"",roomName:"",deviceIsError:!1}},mounted:function(){var o=this;a("#rooms-create-btn").on("click",function(a){o.createRoom(a)})},methods:{createRoom:function(a){this.createModal.name="",this.createModal.nameIsError=!1,this.createModal.state=!0},createRoomDiscard:function(a){this.createModal.state=!1},createRoomCreate:function(a){var o=this;return o.createModal.name.length<2?void(o.createModal.nameIsError=!0):(o.createModal.loading=!0,void o.$http.post("/api/rooms/create",{name:o.createModal.name}).then(function(a){window.location.reload(!0)}).catch(function(a){a.response.data.msg?Alerts.pushError("Error",a.response.data.msg):Alerts.pushError("Error",a.message),o.createModal.loading=!1}))},assignRoom:function(a,o){var s=this;s.assignModal.device="",s.assignModal.deviceIsError=!1,s.assignModal.loading=!0,s.assignModal.loadingMsg="fetching",s.assignModal.roomId=a,s.assignModal.roomName=o,s.assignModal.state=!0,s.$http.post("/api/devices/get-available-for-room",{roomId:a}).then(function(a){s.assignModal.devices=a.data.devices,s.assignModal.device=a.data.devices[0].id,s.assignModal.loading=!1}).catch(function(a){a.response.data.msg?Alerts.pushError("Error",a.response.data.msg):Alerts.pushError("Error",a.message),s.assignModal.state=!1})},assignRoomDiscard:function(a){this.assignModal.state=!1},assignRoomAssign:function(a){var o=this;return o.assignModal.device.length<2?void(o.assignModal.deviceIsError=!0):(o.assignModal.loadingMsg="assigning",o.assignModal.loading=!0,void o.$http.post("/api/rooms/assign-device",{roomId:o.assignModal.roomId,deviceId:o.assignModal.device}).then(function(a){window.location.reload(!0)}).catch(function(a){a.response.data.msg?Alerts.pushError("Error",a.response.data.msg):Alerts.pushError("Error",a.message),o.assignModal.loading=!1}))}}})});