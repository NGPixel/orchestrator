"use strict";jQuery(document).ready(function(s){return new Vue({el:"#page-hubs",data:{discoverModal:{module:!1,moduleName:"",modules:[],hubs:[],state:!1,step:"fetching"},setupModal:{state:!1,step:"fetching"}},mounted:function(){var e=this;s("#hubs-discovery-btn").on("click",function(s){e.discoverHubs(s)})},methods:{discoverHubs:function(s){var e=this;this.discoverModal.module=!1,this.discoverModal.step="fetching",this.discoverModal.state=!0,e.$http.get("/api/hubs/get-supported").then(function(s){e.discoverModal.modules=s.data.modules,e.discoverModal.step="select"}).catch(function(s){s.response.data.msg?Alerts.pushError("Error",s.response.data.msg):Alerts.pushError("Error",s.message),e.discoverModal.state=!1})},discoverHubsDiscard:function(s){this.discoverModal.state=!1},discoverHubsSelect:function(s){this.discoverModal.module=s,this.discoverModal.moduleName=_.find(this.discoverModal.modules,{key:s}).name},discoverHubsScan:function(s){var e=this;e.discoverModal.step="scanning",e.$http.post("/api/hubs/discover",{moduleKey:e.discoverModal.module}).then(function(s){s.data.ok===!0?(e.discoverModal.hubs=s.data.hubs,e.discoverModal.step="found"):e.discoverModal.step="notfound"}).catch(function(s){s.response.data.msg?Alerts.pushError("Error",s.response.data.msg):Alerts.pushError("Error",s.message),e.discoverModal.step="notfound"})},discoverHubsFinish:function(s){var e=this;e.discoverModal.step="redirect",window.location.reload(!0)},setupHub:function(s){var e=this;e.setupModal.step="fetching",e.setupModal.state=!0,_.delay(function(){e.setupModal.step="setup",e.$http.post("/api/hubs/setup",{hubId:s}).then(function(s){e.setupModal.step="success"}).catch(function(s){s.response.data.msg?Alerts.pushError("Error",s.response.data.msg):Alerts.pushError("Error",s.message),e.setupModal.state=!1})},500)},setupHubFinish:function(s){var e=this;e.setupModal.step="redirect",window.location.reload(!0)}}})});